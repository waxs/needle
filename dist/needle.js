var Needle=function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var a=function(t){return new Date(t).getTime()/1e3},r=function(t,e,n,r){return{">":(t=r?a(t):t)>(n=r?a(n):n),"<":t<n,">=":t>=n,"<=":t<=n,"=":t===n}[e]},i=function(t,e,n){var a=function(t,n){return n[e]<t[e]?1:n[e]>t[e]?-1:0},r=function(t,n){return t[e]<n[e]?1:t[e]>n[e]?1:0};return{asc:function(){return t.sort(a)},desc:function(){return t.sort(r)}}[n]()};function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=[],l=[],c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=o.length?o:e,this._amount=e.length,this._calc=0,this._chunks=[],this._data=e,this._settings=a,this._trail=n||{exe:[],data:[],prev:[]}}var e,n,a;return e=t,(n=[{key:"_chain",value:function(e){return new t(e,this._trail)}},{key:"_deep",value:function(t,e){return Object.keys(e).filter((function(t){return"object"===h(e[t])&&e}))}},{key:"_find",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._data;return n.filter((function(n){return n[t]===e}))}},{key:"_objPath",value:function(t){return t.split(".")}},{key:"_objReduce",value:function(t,e){return t.map((function(t){return t})).reduce((function(t,e){return t[e]}),e)}},{key:"_operator",value:function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._data;return i.filter((function(i){return r(i[t],e,n,a)}))}},{key:"take",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._data.length;this._hasTrail();var e=this._data.slice(0,t),n=!t||t>=this._data.length;return n&&this._data||e}},{key:"select",value:function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];this._hasTrail();var r=this._data.map((function(e){var a={};return n.forEach((function(n){var r=-1!==n.indexOf(".")&&t._objPath(n);(e[n]||e[r[0]])&&(r?a[r.slice(-1)[0]]=t._objReduce(r,e):a[n]=e[n])})),a}));return this._chain(r)}},{key:"chunk",value:function(t){var e=this;this._hasTrail(),this._chunks.data=[],this._chunks.current=0;for(var n=0;n<this._data.length;n+=t)this._chunks.data.push(this._data.slice(n,n+t));var a={chunks:this._chunks.data,current:this._chunks.selected,amount:this._chunks.data.length,size:t,prev:function(){return e._prevChunk()},next:function(){return e._nextChunk()},start:function(t){return e.template(t,e._chunks.data[0]),a}};return a}},{key:"_prevChunk",value:function(){var t=this._chunks;return t.current+=0===t.current?t.data.length-1:-1,this._chain(t.data[t.current])}},{key:"_nextChunk",value:function(){var t=this._chunks;return t.current+=t.current<t.data.length-1?1:-Math.abs(t.data.length-1),this._chain(t.data[t.current])}},{key:"index",value:function(t){return this._hasTrail(),this._data[t]}},{key:"get",value:function(){return this._hasTrail(),this._chain(this._data)}},{key:"first",value:function(){this._hasTrail();var t=this._data[0];return this._chain([t])}},{key:"last",value:function(){this._hasTrail();var t=this._data.slice(-1)[0];return this._chain([t])}},{key:"count",value:function(){return this._hasTrail(),this._amount}},{key:"sort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this._hasTrail();var n=i(this._data,t,e);return this._chain(n)}},{key:"log",value:function(t){this._hasTrail(),console.log(t&&this.take(t)||this._data)}},{key:"print",value:function(t){this._hasTrail(),(document.querySelector("#result")||document.body).textContent=[this._data].map((function(t){return JSON.stringify(t)}))}},{key:"random",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._hasTrail();for(var e=[];e.length!==t||e.length===this._data.length;){var n=Math.floor(Math.random()*(1+this._data.length-1));-1===e.indexOf(this._data[n])&&e.push(this._data[n])}return this._chain(e)}},{key:"template",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;return this._hasTrail()?this._data.forEach((function(e){return t(e)})):e.forEach((function(e){return t(e)}))}},{key:"smaller",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var a=this._operator(t,"<=",e,n);return this._chain(a)}},{key:"bigger",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var a=this._operator(t,">=",e,n);return this._chain(a)}},{key:"between",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var a=this._data.filter((function(a){return r(a[t],">=",e[0],n)&&r(a[t],"<=",e[1],n)}));return this._chain(a)}},{key:"equal",value:function(t,e){this._hasTrail();var n=this._operator(t,"=",e);return this._chain(n)}},{key:"min",value:function(t){this._hasTrail();var e=Math.min.apply(Math,u(this._data.map((function(e){return e[t]}))));return this.find(t,e)}},{key:"max",value:function(t){this._hasTrail();var e=Math.max.apply(Math,u(this._data.map((function(e){return e[t]}))));return this.find(t,e)}},{key:"positive",value:function(t){this._hasTrail();var e=this._operator(t,">=",0);return this._chain(e)}},{key:"negative",value:function(t){this._hasTrail();var e=this._operator(t,"<",0);return this._chain(e)}},{key:"sum",value:function(t){return this._hasTrail(),this._calc=this._data.reduce((function(e,n){return e+n[t]}),0),this._calc}},{key:"before",value:function(t,e){return this.smaller(t,e,!0)}},{key:"after",value:function(t,e){return this.bigger(t,e,!0)}},{key:"period",value:function(t,e){return this.between(t,e,!0)}},{key:"is",value:function(t){this._hasTrail();var e=this._data.filter((function(e){return e[t]}));return this._chain(e)}},{key:"has",value:function(t){this._hasTrail();var e=this._data.filter((function(e){return e.hasOwnProperty(t)}));return this._chain(e)}},{key:"hasDeep",value:function(t){var e=this;this._hasTrail();var n=[];return function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._data,i=arguments.length>2?arguments[2]:void 0;r.forEach((function(r){var u=i||r,h=e._deep(a,r);r.hasOwnProperty(a)&&n.push(u),h.length&&t(a,h.map((function(t){return r[t]})),u)}))}(t),this._chain(n)}},{key:"find",value:function(t,e){this._hasTrail();var n=this._find(t,e);return this._chain(n)}},{key:"findDeep",value:function(t,e){var n=this;this._hasTrail();var a=[];return function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n._data,u=arguments.length>3?arguments[3]:void 0;i.forEach((function(i){var h=u||i,s=n._deep(e,i);i[e]===r&&a.push(h),s.length&&t(e,r,s.map((function(t){return i[t]})),h)}))}(t,e),this._chain(a)}},{key:"_hasTrail",value:function(){if(this._trail.exe.length)return this._data=[].concat.apply([],this._exeTrail()),this._chain(this._data)}},{key:"_addTrail",value:function(t,e){for(var n=["orWhere"],a=["andWhere"],r=arguments.length,i=new Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];t&&this._trail.exe.push({type:a.includes(e)?"and":n.includes(e)&&"or",name:"_"+e,args:i,exe:this["_"+e].bind(this)})}},{key:"_resetTrail",value:function(){this._trail={exe:[],data:[],prev:[]}}},{key:"_exeTrail",value:function(){var t=this,e=[],n=[],a=this._trail.exe.map((function(a){return"or"===a.type&&(n=t._trail.data),"and"===a.type&&(n=t._trail.prev),e.push(a.type),a.exe.apply(a,u(a.args).concat([n]))}));return e.includes("and")||a.push(this._trail.prev),this._resetTrail(),a}},{key:"where",value:function(t,e,n){this._hasTrail(),this._trail.data=this._data;var a=this._operator(t,e,n);return this._trail.prev=a,this._chain(a)}},{key:"orWhere",value:function(t,e,n){return this._addTrail(!0,"orWhere",t,e,n),this._chain(this._data)}},{key:"_orWhere",value:function(t,e,n,a){return this._operator(t,e,n,!1,a)}},{key:"andWhere",value:function(t,e,n){return this._addTrail(!0,"andWhere",t,e,n),this._chain(this._data)}},{key:"_andWhere",value:function(t,e,n,a){return this._operator(t,e,n,!1,a)}},{key:"create",value:function(t){this._data.push(t),this._chain(this._data)}},{key:"read",value:function(t){return this._hasTrail(),this._data[t]}},{key:"update",value:function(t,e){this._hasTrail(),this._data[t]=e,this._chain(this._data)}},{key:"updateValue",value:function(t,e,n){this._hasTrail(),this._data[t][e]=n,this._chain(this._data)}},{key:"updateAll",value:function(t,e){this._hasTrail(),this._data.forEach((function(n){return n[t]=e})),this._chain(this._data)}},{key:"delete",value:function(t){this._hasTrail(),delete this._data[t],this._chain(this._data)}},{key:"deleteValue",value:function(t,e){this._hasTrail(),delete this._data[t][e],this._chain(this._data)}},{key:"deleteAll",value:function(){this._hasTrail(),this._data=[],this._chain(this._data)}},{key:"save",value:function(t){return t=t||(65536*(1+Math.random())|0).toString(16).substring(1),l.forEach((function(t){return t.id++})),l.push({name:t,id:1,data:this._data,time:Math.floor(Date.now()/1e3)}),l.reverse(),t}},{key:"retrieve",value:function(t){return this._find("name",t,l)}},{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"config",get:function(){return this._settings}},{key:"store",get:function(){return l}}])&&s(e.prototype,n),a&&s(e,a),t}();e.default=c}]).default;