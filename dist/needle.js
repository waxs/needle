var Needle=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e);var i=function(t){return new Date(t).getTime()/1e3},a=function(t){return Array.isArray(t)?"array":r(t)},u=function(t){return Array.isArray(t)},h=function(t){return u&&1===t.length&&t[0]||t},o=function(t,e,n){return u(t[e])?t[e].includes(n):t[e]===n},s=function(t,e,n,r){return{">":(t=r?i(t):t)>(n=r?i(n):n),"<":t<n,">=":t>=n,"<=":t<=n,"=":t===n}[e]},c=function(t,e,n){var r=function(t,n){return n[e]<t[e]?1:n[e]>t[e]?-1:0},i=function(t,n){return t[e]<n[e]?1:t[e]>n[e]?-1:0};return{asc:function(){return t.sort(r)},desc:function(){return t.sort(i)}}[n]()};function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=[],g=[],k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p=p.length?p:e,this._amount=e.length,this._calc=0,this._chunks=[],this._data=e,this._info={chunks:d({},this._chunks),original:p.length,length:this._data.length},this._settings=r,this._stamp={},this._trail=n||{exe:[],data:[],prev:[]}}var e,n,r;return e=t,(n=[{key:"_chain",value:function(e){return new t(e,this._trail)}},{key:"_deep",value:function(t,e){return Object.keys(e).filter((function(t){return!u(e[t])&&"object"===f(e[t])&&e}))}},{key:"_find",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._data;e=h(e);var r=a(e),i={array:function(){return n.filter((function(n){return n[t]&&n[t].some((function(t){return e.includes(t)}))}))},boolean:function(){return n.filter((function(e){return e[t]}))},string:function(){return n.filter((function(n){return n[t]&&o(n,t,e)}))},number:function(){return n.filter((function(n){return n[t]&&o(n,t,e)}))}};return i[r]()}},{key:"_objPath",value:function(t){return t.split(".")}},{key:"_objReduce",value:function(t,e){return t.map((function(t){return t})).reduce((function(t,e){return t[e]}),e)}},{key:"_operator",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._data;return i.filter((function(i){return s(i[t],e,n,r)}))}},{key:"take",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._data.length,e=arguments.length>1?arguments[1]:void 0;this._hasTrail(),"string"===a(t)&&"all"===t&&(t=this._data.length);var n=this._data.slice(0,t),r=!t||t>=this._data.length,i=r&&this._data||n;return this.info=i.length,e&&{results:i,info:this.info}||i}},{key:"select",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._hasTrail();var i=this._data.map((function(e){var r={};return n.forEach((function(n){var i=-1!==n.indexOf(".")&&t._objPath(n);(e[n]||e[i[0]])&&(i?r[i.slice(-1)[0]]=t._objReduce(i,e):r[n]=e[n])})),r}));return this._chain(i)}},{key:"chunk",value:function(t){var e=this;this._hasTrail(),this._chunks.data=[],this._chunks.current=0;for(var n=0;n<this._data.length;n+=t)this._chunks.data.push(this._data.slice(n,n+t));var r={chunks:this._chunks.data,current:this._chunks.selected,amount:this._chunks.data.length,size:t,prev:function(){return e._prevChunk()},next:function(){return e._nextChunk()},start:function(t){return e.template(t,e._chunks.data[0]),r}};return r}},{key:"_prevChunk",value:function(){var t=this._chunks;return t.current+=0===t.current?t.data.length-1:-1,this._chain(t.data[t.current])}},{key:"_nextChunk",value:function(){var t=this._chunks;return t.current+=t.current<t.data.length-1?1:-Math.abs(t.data.length-1),this._chain(t.data[t.current])}},{key:"index",value:function(t){return this._hasTrail(),this._data[t]}},{key:"get",value:function(){return this._hasTrail(),this._chain(this._data)}},{key:"first",value:function(){this._hasTrail();var t=this._data[0];return this._chain([t])}},{key:"last",value:function(){this._hasTrail();var t=this._data.slice(-1)[0];return this._chain([t])}},{key:"count",value:function(){return this._hasTrail(),this._amount}},{key:"sort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this._hasTrail();var n=c(this._data,t,e);return this._chain(n)}},{key:"log",value:function(t){this._hasTrail(),console.log(t&&this.take(t)||this._data)}},{key:"print",value:function(t){this._hasTrail(),(document.querySelector("#result")||document.body).textContent=[this._data].map((function(t){return JSON.stringify(t)}))}},{key:"random",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._hasTrail();for(var e=[];e.length!==t||e.length===this._data.length;){var n=Math.floor(Math.random()*(1+this._data.length-1));-1===e.indexOf(this._data[n])&&e.push(this._data[n])}return this._chain(e)}},{key:"template",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;return this._hasTrail()?this._data.forEach(t,this):(e.forEach(t,{needle:this,info:this.info}),this.info)}},{key:"smaller",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var r=this._operator(t,"<=",e,n);return this._chain(r)}},{key:"bigger",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var r=this._operator(t,">=",e,n);return this._chain(r)}},{key:"between",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var r=this._data.filter((function(r){return s(r[t],">=",e[0],n)&&s(r[t],"<=",e[1],n)}));return this._chain(r)}},{key:"equal",value:function(t,e){this._hasTrail();var n=this._operator(t,"=",e);return this._chain(n)}},{key:"min",value:function(t){this._hasTrail();var e=Math.min.apply(Math,l(this._data.map((function(e){return e[t]}))));return this.find(t,e)}},{key:"max",value:function(t){this._hasTrail();var e=Math.max.apply(Math,l(this._data.map((function(e){return e[t]}))));return this.find(t,e)}},{key:"positive",value:function(t){this._hasTrail();var e=this._operator(t,">=",0);return this._chain(e)}},{key:"negative",value:function(t){this._hasTrail();var e=this._operator(t,"<",0);return this._chain(e)}},{key:"sum",value:function(t){return this._hasTrail(),this._calc=this._data.reduce((function(e,n){return e+n[t]}),0),this._calc}},{key:"before",value:function(t,e){return this.smaller(t,e,!0)}},{key:"after",value:function(t,e){return this.bigger(t,e,!0)}},{key:"period",value:function(t,e){return this.between(t,e,!0)}},{key:"is",value:function(t){this._hasTrail();var e=this._data.filter((function(e){return e[t]}));return this._chain(e)}},{key:"has",value:function(t){this._hasTrail();var e=this._data.filter((function(e){return e.hasOwnProperty(t)}));return this._chain(e)}},{key:"hasDeep",value:function(t){var e=this;this._hasTrail();var n=[];return function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._data,a=arguments.length>2?arguments[2]:void 0;i.forEach((function(i){var u=a||i,h=e._deep(r,i);i.hasOwnProperty(r)&&n.push(u),h.length&&t(r,h.map((function(t){return i[t]})),u)}))}(t),this._chain(n)}},{key:"find",value:function(t,e){this._hasTrail();var n=this._find(t,e);return this._chain(n)}},{key:"findDeep",value:function(t,e){var n=this;this._hasTrail();var r=[];return function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n._data,u=arguments.length>3?arguments[3]:void 0;a.forEach((function(a){var h=u||a,o=n._deep(e,a);h===a&&n._find(e,i,[a]).length>0&&!r.includes(h)&&r.push(h),(0===o.length||Object.keys(a).includes(e))&&n._find(e,i,[a]).length>0&&!r.includes(h)&&r.push(h),o.length&&t(e,i,o.map((function(t){return a[t]})),h)}))}(t,e),this._chain(r)}},{key:"_hasTrail",value:function(){if(this._trail.exe.length)return this._data=[].concat.apply([],this._exeTrail()),this._chain(this._data)}},{key:"_addTrail",value:function(t,e){for(var n=["orWhere"],r=["andWhere"],i=arguments.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=arguments[u];t&&this._trail.exe.push({type:r.includes(e)?"and":n.includes(e)&&"or",name:"_"+e,args:a,exe:this["_"+e].bind(this)})}},{key:"_resetTrail",value:function(){this._trail={exe:[],data:[],prev:[]}}},{key:"_exeTrail",value:function(){var t=this,e=[],n=[],r=this._trail.exe.map((function(r){return"or"===r.type&&(n=t._trail.data),"and"===r.type&&(n=t._trail.prev),e.push(r.type),r.exe.apply(r,l(r.args).concat([n]))}));return e.includes("and")||r.push(this._trail.prev),this._resetTrail(),r}},{key:"where",value:function(t,e,n){this._hasTrail(),this._trail.data=this._data;var r=this._operator(t,e,n);return this._trail.prev=r,this._chain(r)}},{key:"orWhere",value:function(t,e,n){return this._addTrail(!0,"orWhere",t,e,n),this._chain(this._data)}},{key:"_orWhere",value:function(t,e,n,r){return this._operator(t,e,n,!1,r)}},{key:"andWhere",value:function(t,e,n){return this._addTrail(!0,"andWhere",t,e,n),this._chain(this._data)}},{key:"_andWhere",value:function(t,e,n,r){return this._operator(t,e,n,!1,r)}},{key:"create",value:function(t){this._data.push(t),this._chain(this._data)}},{key:"read",value:function(t){return this._hasTrail(),this._data[t]}},{key:"update",value:function(t,e){this._hasTrail(),this._data[t]=e,this._chain(this._data)}},{key:"updateValue",value:function(t,e,n){this._hasTrail(),this._data[t][e]=n,this._chain(this._data)}},{key:"updateAll",value:function(t,e){this._hasTrail(),this._data.forEach((function(n){return n[t]=e})),this._chain(this._data)}},{key:"delete",value:function(t){this._hasTrail(),delete this._data[t],this._chain(this._data)}},{key:"deleteValue",value:function(t,e){this._hasTrail(),delete this._data[t][e],this._chain(this._data)}},{key:"deleteAll",value:function(){this._hasTrail(),this._data=[],this._chain(this._data)}},{key:"save",value:function(t){return t=t||(65536*(1+Math.random())|0).toString(16).substring(1),g.forEach((function(t){return t.id++})),g.push({name:t,id:1,data:this._data,time:Math.floor(Date.now()/1e3)}),g.reverse(),t}},{key:"retrieve",value:function(t){return this._find("name",t,g)}},{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"info",get:function(){return this._info},set:function(t){this._info.length=t}},{key:"config",get:function(){return this._settings}},{key:"store",get:function(){return g}}])&&y(e.prototype,n),r&&y(e,r),t}();e.default=k}]).default;