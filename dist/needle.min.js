/*!
 * @waxs/needle (1.1.0) by Sander Hidding
 * Find your needle in a haystack. Needle is a small and fast query builder for sorting, manipulating and retrieving data.
 * This source code is licensed under the MIT license found in the GitHub repository (git+https://github.com/waxs/needle.git)
 */
var Needle=function(t){var n={};function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)r.d(e,a,function(n){return t[n]}.bind(null,a));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";r.r(n);var e=function(t,n){Object.keys(n)[0];Object.keys(n).forEach((function(r){return t.prototype[r]=n[r]}))};var a=function(t){return Array.isArray(t)};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(t,n){return n&&Object.keys(n).filter((function(t){var r=!a(n[t]),e="object"===i(n[t]);return r&&e&&n}))};var o=function(t,n,r){return a(t[n])?t[n].includes(r):t[n]===r},s=function(t){return a(t)&&1===t.length&&t[0]||t},h=function(t){return Date.parse(t)};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f=function(t){return("number"==typeof t||isNaN(h(t))?Array.isArray(t)&&"array":"date")||c(t)};var l=function(t,n,r,e){t=e?new Date(t):t,r=e?new Date(r):r;var i=function(n){return t=s(t),a(t)?t.map((function(t){return u(t,n)})).some((function(t){return t})):u(t,n)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a={">":t>e,"<":t<e,">=":t>=e,"<=":t<=e,"=":t===e,"!=":t!==e};return a[n]},o="="===n?"some":"every";return a(r)?r[o]((function(t){return i(t)})):i(r)};var d={_chain:function(t){return new st(t,this._trail)},_deep:function(t,n){var r=this,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=[],i=function n(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r._data,s=arguments.length>3?arguments[3]:void 0;o.forEach((function(o){var h=s||o,c=u(e,o);"has"===t&&o.hasOwnProperty(e)&&a.push(h),"find"===t&&(h===o&&r._find(e,i,[o]).length>0&&!a.includes(h)&&a.push(h),(0===c.length||Object.keys(o).includes(e))&&r._find(e,i,[o]).length>0&&!a.includes(h)&&a.push(h)),c.length&&n(e,i,c.map((function(t){return o[t]})),h)}))};return i(n,e),a},_find:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._data;n=s(n);var e=f(n),i=function(r){return n.includes(r[t])},u=function(r){return r[t].some((function(t){return n.includes(t)}))},h=function(r){return r[t]&&o(r,t,n)},c={array:function(){return r.filter((function(n){return a(n[t])?u(n):i(n)}))},boolean:function(){return r.filter((function(n){return n[t]}))},string:function(){return r.filter(h)},number:function(){return r.filter(h)}};return c[e]()},_operator:function(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._data;return a.filter((function(a){return l(a[t],n,r,e)}))}};var _=function(t){var n,r={count:1,array:[],save:[]},e=function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=a||r;e.forEach((function(a,u){i.array.includes(a)&&i.save.push(a),i.array.push(a),u===e.length-1&&i.save.length>0&&(t(i.save,{array:[],save:[]}),r.count++),0===i.save.length&&i.array.length&&(n=i.array)}))};return e(t),{count:r.count,result:n}},v=function(t){return[].concat.apply([],t)};function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return y(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var m=function(t){return p(new Set(t))};function g(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return b(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var T={_addTrail:function(t,n){for(var r=["or","orWhere"],e=["and","andWhere"],a=arguments.length,i=new Array(a>2?a-2:0),u=2;u<a;u++)i[u-2]=arguments[u];t&&this._trail.exe.push({type:e.includes(n)?"and":r.includes(n)&&"or",name:"_"+n,args:i,exe:this["_"+n].bind(this)})},_exeTrail:function(){var t=this,n=[],r=[],e=this._trail.exe.map((function(e){return"or"===e.type&&(r=t._trail.data),"and"===e.type&&(r=t._trail.prev),n.push(e.type),{type:e.type,result:e.exe.apply(e,g(e.args).concat([r]))}})),a=e.filter((function(t){return"and"===t.type})).map((function(t){return t.result})),i=v(a),u=a.length>1?_(i):i,o=e.filter((function(t){return"or"===t.type})).map((function(t){return t.result})),s=v(o),h=m(s);return n.includes("and")||(u=this._trail.prev),this._resetTrail(),[u,h]},_hasTrail:function(){if(this._trail.exe.length)return this._data=m([].concat.apply([],this._exeTrail())),this._chain(this._data)},_resetTrail:function(){this._trail={exe:[],data:[],prev:[]}}};var w=function(t){return t.split(".")};var S=function(t,n){return t.map((function(t){return t})).reduce((function(t,n){return t[n]}),n)};var j={chunk:function(t){var n=this;this._hasTrail(),this._chunks.data=[],this._chunks.current=0;for(var r=0;r<this._data.length;r+=t)this._chunks.data.push(this._data.slice(r,r+t));var e={chunks:this._chunks.data,current:this._chunks.selected,amount:this._chunks.data.length,size:t,prev:function(){return n._prevChunk()},next:function(){return n._nextChunk()},start:function(t){return n.template(t,n._chunks.data[0]),e}};return e},_prevChunk:function(){var t=this._chunks;return t.current+=0===t.current?t.data.length-1:-1,this._chain(t.data[t.current])},_nextChunk:function(){var t=this._chunks;return t.current+=t.current<t.data.length-1?1:-Math.abs(t.data.length-1),this._chain(t.data[t.current])},count:function(){return this._hasTrail(),this._amount},first:function(){this._hasTrail();var t=this._data[0];return this._chain([t])},get:function(){return this._hasTrail(),this._chain(this._data)},index:function(t){return this._hasTrail(),this._data[t]},last:function(){this._hasTrail();var t=this._data.slice(-1)[0];return this._chain([t])},select:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._hasTrail();var e=this._data.map((function(t){var r={};return n.forEach((function(n){var e=-1!==n.indexOf(".")&&w(n);(t[n]||t[e[0]])&&(e?r[e.slice(-1)[0]]=S(e,t):r[n]=t[n])})),r}));return this._chain(e)},take:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._data.length,n=arguments.length>1?arguments[1]:void 0;this._hasTrail(),"string"===f(t)&&"all"===t&&(t=this._data.length);var r=this._data.slice(0,t),e=!t||t>=this._data.length,a=e&&this._data||r;return this.info=a.length,n&&{results:a,info:this.info}||a||[]},values:function(t){var n=this;this._hasTrail();var r=[];return function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._data,i=arguments.length>2?arguments[2]:void 0;a.forEach((function(n){var a=i||n,o=u(e,n);n[e]&&(r.push(n[e]),o.length&&t(e,o.map((function(t){return n[t]})),a))}))}(t),m(v(r))}},O=function(t,n,r){if(!t.length)return t;var e="date"===f(t[0][n]),a=function(t,r){return{a:t=e?new Date(t[n]):t[n],b:r=e?new Date(r[n]):r[n]}},i=function(t,n){var r=a(t,n);return r.b<r.a?1:r.b>r.a?-1:0},u=function(t,n){var r=a(t,n);return r.a<r.b?1:r.a>r.b?-1:0};return{asc:function(){return t.sort(i)},desc:function(){return t.sort(u)}}[r]()};var k={sort:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this._hasTrail();var r=O(this._data,t,n);return this._chain(r)}};var A={log:function(t){this._hasTrail(),console.log(t&&this.take(t)||this._data)},print:function(t){this._hasTrail(),(document.querySelector("#result")||document.body).textContent=[this._data].map((function(t){return JSON.stringify(t)}))},random:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._hasTrail();for(var n=[];n.length!==t||n.length===this._data.length;){var r=Math.floor(Math.random()*(1+this._data.length-1));-1===n.indexOf(this._data[r])&&n.push(this._data[r])}return this._chain(n)}};var x={_empty:function(t){var n=this;return 0===this._data.length&&t(this.config),{results:function(t){return n._results(t)}}},_results:function(t){var n=this;return t(this.info),{empty:function(t){return n._empty(t)}}},template:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;if(this._hasTrail())return this._data.forEach(t,this);var e={needle:this,info:this.info};return r.length>0&&r.forEach(t,e),{info:this.info,empty:function(t){return n._empty(t)},results:function(t){return n._results(t)}}}};function D(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return E(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var M=function(t,n,r){return Math[r].apply(Math,D(t.map((function(t){return t[n]}))))};var P={average:function(t){this._hasTrail();var n=this._data.reduce((function(n,r){return n+r[t]}),0)/this._data.length,r=this._data.reduce((function(r,e){return Math.abs(r[t]-n)<Math.abs(e[t]-n)?r:e}));return this.find(t,r[t])},smaller:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var e="date"===f(n),a=n?this._operator(t,"<=",n,e||r):this._data;return this._chain(a)},bigger:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var e="date"===f(n),a=n?this._operator(t,">=",n,e||r):this._data;return this._chain(a)},between:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var e="date"===f(n[0]),a=this._data.filter((function(a){return l(a[t],">=",n[0],e||r)&&l(a[t],"<=",n[1],e||r)}));return this._chain(a)},min:function(t){this._hasTrail();var n=M(this._data,t,"min");return this.find(t,n)},max:function(t){this._hasTrail();var n=M(this._data,t,"max");return this.find(t,n)},positive:function(t){this._hasTrail();var n=this._operator(t,">=",0);return this._chain(n)},negative:function(t){this._hasTrail();var n=this._operator(t,"<",0);return this._chain(n)},sum:function(t){return this._hasTrail(),this._calc=this._data.reduce((function(n,r){return n+r[t]}),0),this._calc}},C=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"history",e=n?new Date(n):new Date;t=24*t*60*60*1e3;var a={history:e.getTime()-t,future:e.getTime()+t},i=new Date(a[r]);i.getDate(),i.getMonth(),i.getFullYear();return i},I=[];["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].forEach((function(t,n){var r,e,a;I.push({index:n,month:t,days:(r=n,a=new Date,e=e||a.getFullYear(),new Date(e,r+1,0).getDate())})}));var q=I,W=function(){return q};var N=function(){return(new Date).getFullYear()%4==0},R=function(){var t=new Date,n=t.getMonth(),r=t.getFullYear();return[{name:"days",amount:1},{name:"weeks",amount:7},{name:"months",year:r,month:n,amount:30},{name:"quarters",year:r,amount:Math.round((N?366:365)/4)},{name:"years",year:r,amount:N?366:365}]},F=function(){return R};var Y={month:function(t,n,r){var e=W(),a=this._find("month",n,e)[0],i=C(0,"".concat(a.month,"/1/").concat(r)),u=C(0,"".concat(a.month,"/").concat(a.days,"/").concat(r));return this.between(t,[i,u],!0)},_namedDates:function(t){var n=F();return this._find("name",t,n)[0]},previous:function(t,n,r){var e=this._namedDates(r),a=C(e.amount*n);return this.between(t,[a,new Date],!0)},upcoming:function(t,n,r){var e=this._namedDates(r),a=C(e.amount*n,new Date,"future");return this.between(t,[new Date,a],!0)},year:function(t,n){return this.between(t,["1/1/".concat(n),"12/31/".concat(n)],!0)}};var U={find:function(t,n){this._hasTrail();var r=n?this._find(t,n):this._data;return this._chain(r)},findDeep:function(t,n){this._hasTrail();var r=this._deep("find",t,n);return this._chain(r)},has:function(t){this._hasTrail();var n=this._data.filter((function(n){return n.hasOwnProperty(t)}));return this._chain(n)},hasDeep:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._hasTrail();var r=this._deep("has",t,n);return this._chain(r)},is:function(t){this._hasTrail();var n=this._data.filter((function(n){return n[t]}));return this._chain(n)},not:function(t){this._hasTrail();var n=this._data.filter((function(n){return!n[t]}));return this._chain(n)}};var $={where:function(t,n,r){!r&&(r=n)&&(n="="),this._hasTrail(),this._trail.data=this._data;var e=r&&0!==r.length&&this._operator(t,n,r)||this._data;return this._trail.prev=e,this._chain(e)},andWhere:function(t,n,r){return!r&&(r=n)&&(n="="),r&&0!==r.length&&this._addTrail(!0,"andWhere",t,n,r),this._chain(this._data)},_andWhere:function(t,n,r,e){return this._operator(t,n,r,!1,e)},orWhere:function(t,n,r){return!r&&(r=n)&&(n="="),r&&0!==r.length&&this._addTrail(!0,"orWhere",t,n,r),this._chain(this._data)},_orWhere:function(t,n,r,e){return this._operator(t,n,r,!1,e)},query:function(t){this._hasTrail(),this._trail.data=this._data;var n=t(this,this._data);return this._trail.prev=n,this._chain(m(n))},_query:function(t,n){this._hasTrail();var r={unique:m,doubles:_},e=t.map((function(t){return t.data})),a=r[n](v(e));return{amount:t.length,merge:a}},and:function(t){return this._addTrail(!0,"and",t),this._chain(this._data)},_and:function(t,n){return t(new Needle(n),n)},or:function(t){return this._addTrail(!0,"or",t),this._chain(this._data)},_or:function(t,n){return t(new Needle(n),n)},orQuery:function(t){var n=this._query(t(this),"unique");return this._chain(n.merge)},andQuery:function(t){var n=this._query(t(this),"doubles"),r=n.merge.count===n.amount;return this._chain(r?n.merge.result:[])}};var Q={customEach:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;this._hasTrail();var r=n.map(t);return this._chain(r)},customFilter:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;this._hasTrail();var r=n.filter(t);return this._chain(r)}},V=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},z=function(){return Math.floor(Date.now()/1e3)};var J={save:function(t,n){return n=n||V(),t.length>0&&t.forEach((function(t){return t.id++})),t.push({name:n,id:1,data:this._data,time:z()}),t.reverse(),n},retrieve:function(t,n){return this._find("name",t,n)}};var B={create:function(t){this._hasTrail(),this._data.push(t),this._chain(this._data)},read:function(t){return this._hasTrail(),this._chain([this._data[t]])},remove:function(t){return this._hasTrail(),this._data.splice(t,1),this._chain(this._data)},removeValue:function(t,n){this._hasTrail(),delete this._data[t][n],this._chain(this._data)},removeAll:function(t){this._hasTrail(),this._data.forEach((function(n){return delete n[t]})),this._chain(this._data)},update:function(t,n){this._hasTrail(),this._data[t]=n,this._chain(this._data)},updateValue:function(t,n,r){this._hasTrail(),this._data[t][n]=r,this._chain(this._data)},updateAll:function(t,n){this._hasTrail(),this._data.forEach((function(r){return r[t]=n})),this._chain(this._data)}};var G=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)};e(G,d),e(G,T),e(G,j),e(G,k),e(G,A),e(G,x),e(G,P),e(G,Y),e(G,U),e(G,$),e(G,Q),e(G,J),e(G,B);var H=[],K=function(t,n){return H=H.length>0?H:t,[{name:"amount",value:t.length||0},{name:"calc",value:0},{name:"chunks",value:{}},{name:"content",value:{}},{name:"data",value:t},{name:"info",value:{set:H.length,length:t.length}},{name:"trail",value:n||{exe:[],data:[],prev:[]}}]};function L(t,n,r){K(n,r).forEach((function(n){return t["_"+n.name]=n.value}))}function X(t,n){n.length&&Object.keys(n[0]).forEach((function(r){"object"!==f(n[0][r])&&(t._content[r]=f(n[0][r]))}))}function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function nt(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function rt(t,n){return(rt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function et(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,e=ut(t);if(n){var a=ut(this).constructor;r=Reflect.construct(e,arguments,a)}else r=e.apply(this,arguments);return at(this,r)}}function at(t,n){return!n||"object"!==Z(n)&&"function"!=typeof n?it(t):n}function it(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&rt(t,n)}(i,t);var n,r,e,a=et(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return tt(this,i),L(it(t=a.call(this)),n,r),X(it(t),n),t}return n=i,(r=[{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"content",get:function(){return this._content}},{key:"info",get:function(){return this._info},set:function(t){this._info.length=t}},{key:"config",set:function(t){this._settings=t},get:function(){return this._settings}}])&&nt(n.prototype,r),e&&nt(n,e),i}(G),st=n.default=ot}]).default;