var Needle=function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e);var r=function(){return(new Date).getFullYear()%4==0},i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"history",a=e?new Date(e):new Date,r={history:a.getTime()-24*t*60*60*1e3,future:a.getTime()+24*t*60*60*1e3},i=new Date(r[n]);i.getDate(),i.getMonth(),i.getFullYear();return i},u=function(t){return Array.isArray(t)?"array":a(t)},h=function(t){return Array.isArray(t)},o=function(t){return h&&1===t.length&&t[0]||t},s=function(t,e,n){return h(t[e])?t[e].includes(n):t[e]===n},c=function(t,e,n,a){return{">":(t=a?new Date(t):t)>(n=a?new Date(n):n),"<":t<n,">=":t>=n,"<=":t<=n,"=":t===n}[e]},l=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(t,n){return{a:t=a?new Date(t[e]):t[e],b:n=a?new Date(n[e]):n[e]}},i=function(t,e){var n=r(t,e);return n.b<n.a?1:n.b>n.a?-1:0},u=function(t,e){var n=r(t,e);return n.a<n.b?1:n.a>n.b?-1:0},h={asc:function(){return t.sort(i)},desc:function(){return t.sort(u)}};return h[n]()};function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var g=[],m=[],k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g=g.length?g:e,this._amount=e.length,this._calc=0,this._chunks=[],this._data=e,this._info={chunks:v({},this._chunks),original:g.length,length:this._data.length},this._settings={},this._stamp={},this._trail=n||{exe:[],data:[],prev:[]}}var e,n,a;return e=t,(n=[{key:"_chain",value:function(e){return new t(e,this._trail)}},{key:"_deep",value:function(t,e){return Object.keys(e).filter((function(t){return!h(e[t])&&"object"===d(e[t])&&e}))}},{key:"_find",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._data;e=o(e);var a=u(e),r={array:function(){return n.filter((function(n){return n[t]&&n[t].some((function(t){return e.includes(t)}))}))},boolean:function(){return n.filter((function(e){return e[t]}))},string:function(){return n.filter((function(n){return n[t]&&s(n,t,e)}))},number:function(){return n.filter((function(n){return n[t]&&s(n,t,e)}))}};return r[a]()}},{key:"_objPath",value:function(t){return t.split(".")}},{key:"_objReduce",value:function(t,e){return t.map((function(t){return t})).reduce((function(t,e){return t[e]}),e)}},{key:"_operator",value:function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._data;return r.filter((function(r){return c(r[t],e,n,a)}))}},{key:"take",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._data.length,e=arguments.length>1?arguments[1]:void 0;this._hasTrail(),"string"===u(t)&&"all"===t&&(t=this._data.length);var n=this._data.slice(0,t),a=!t||t>=this._data.length,r=a&&this._data||n;return this.info=r.length,e&&{results:r,info:this.info}||r}},{key:"select",value:function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];this._hasTrail();var r=this._data.map((function(e){var a={};return n.forEach((function(n){var r=-1!==n.indexOf(".")&&t._objPath(n);(e[n]||e[r[0]])&&(r?a[r.slice(-1)[0]]=t._objReduce(r,e):a[n]=e[n])})),a}));return this._chain(r)}},{key:"chunk",value:function(t){var e=this;this._hasTrail(),this._chunks.data=[],this._chunks.current=0;for(var n=0;n<this._data.length;n+=t)this._chunks.data.push(this._data.slice(n,n+t));var a={chunks:this._chunks.data,current:this._chunks.selected,amount:this._chunks.data.length,size:t,prev:function(){return e._prevChunk()},next:function(){return e._nextChunk()},start:function(t){return e.template(t,e._chunks.data[0]),a}};return a}},{key:"_prevChunk",value:function(){var t=this._chunks;return t.current+=0===t.current?t.data.length-1:-1,this._chain(t.data[t.current])}},{key:"_nextChunk",value:function(){var t=this._chunks;return t.current+=t.current<t.data.length-1?1:-Math.abs(t.data.length-1),this._chain(t.data[t.current])}},{key:"values",value:function(t){var e=this;this._hasTrail();var n=[];return function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._data,i=arguments.length>2?arguments[2]:void 0;r.forEach((function(r){var u=i||r,h=e._deep(a,r);r.hasOwnProperty(a)&&n.push(r[a]),h.length&&t(a,h.map((function(t){return r[t]})),u)}))}(t),n}},{key:"index",value:function(t){return this._hasTrail(),this._data[t]}},{key:"get",value:function(){return this._hasTrail(),this._chain(this._data)}},{key:"first",value:function(){this._hasTrail();var t=this._data[0];return this._chain([t])}},{key:"last",value:function(){this._hasTrail();var t=this._data.slice(-1)[0];return this._chain([t])}},{key:"count",value:function(){return this._hasTrail(),this._amount}},{key:"sort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this._hasTrail();var n=l(this._data,t,e);return this._chain(n)}},{key:"sortDate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this._hasTrail();var n=l(this._data,t,e,!0);return this._chain(n)}},{key:"log",value:function(t){this._hasTrail(),console.log(t&&this.take(t)||this._data)}},{key:"print",value:function(t){this._hasTrail(),(document.querySelector("#result")||document.body).textContent=[this._data].map((function(t){return JSON.stringify(t)}))}},{key:"random",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._hasTrail();for(var e=[];e.length!==t||e.length===this._data.length;){var n=Math.floor(Math.random()*(1+this._data.length-1));-1===e.indexOf(this._data[n])&&e.push(this._data[n])}return this._chain(e)}},{key:"template",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;return this._hasTrail()?this._data.forEach(t,this):(e.forEach(t,{needle:this,info:this.info}),this.info)}},{key:"smaller",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var a=this._operator(t,"<=",e,n);return this._chain(a)}},{key:"bigger",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var a=this._operator(t,">=",e,n);return this._chain(a)}},{key:"between",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._hasTrail();var a=this._data.filter((function(a){return c(a[t],">=",e[0],n)&&c(a[t],"<=",e[1],n)}));return this._chain(a)}},{key:"equal",value:function(t,e){this._hasTrail();var n=this._operator(t,"=",e);return this._chain(n)}},{key:"min",value:function(t){this._hasTrail();var e=Math.min.apply(Math,f(this._data.map((function(e){return e[t]}))));return this.find(t,e)}},{key:"max",value:function(t){this._hasTrail();var e=Math.max.apply(Math,f(this._data.map((function(e){return e[t]}))));return this.find(t,e)}},{key:"positive",value:function(t){this._hasTrail();var e=this._operator(t,">=",0);return this._chain(e)}},{key:"negative",value:function(t){this._hasTrail();var e=this._operator(t,"<",0);return this._chain(e)}},{key:"sum",value:function(t){return this._hasTrail(),this._calc=this._data.reduce((function(e,n){return e+n[t]}),0),this._calc}},{key:"before",value:function(t,e){return this.smaller(t,e,!0)}},{key:"after",value:function(t,e){return this.bigger(t,e,!0)}},{key:"period",value:function(t,e){return this.between(t,e,!0)}},{key:"month",value:function(t,e,n){var a=[{index:0,month:"jan",days:31},{index:1,month:"feb",days:r?28:29},{index:2,month:"mar",days:31},{index:3,month:"apr",days:30},{index:4,month:"may",days:31},{index:5,month:"jun",days:30},{index:6,month:"jul",days:31},{index:7,month:"aug",days:31},{index:8,month:"sep",days:30},{index:9,month:"oct",days:31},{index:10,month:"nov",days:30},{index:11,month:"dec",days:31}],u=this._find("month",e,a)[0],h=i(0,"".concat(u.month,"/1/").concat(n)),o=i(0,"".concat(u.month,"/").concat(u.days,"/").concat(n));return this.between(t,[h,o],!0)}},{key:"year",value:function(t,e){return this.between(t,["1/1/".concat(e),"12/31/".concat(e)],!0)}},{key:"_namedDates",value:function(t){var e,n,a,i=(e=new Date,n=e.getMonth(),[{name:"days",amount:1},{name:"weeks",amount:7},{name:"months",year:a=e.getFullYear(),month:n,amount:30},{name:"quarters",year:a,amount:Math.round((r?366:365)/4)},{name:"years",year:a,amount:r?366:365}]);return this._find("name",t,i)[0]}},{key:"last",value:function(t,e,n){var a=this._namedDates(n),r=i(a.amount*e);return this.between(t,[r,new Date],!0)}},{key:"next",value:function(t,e,n){var a=this._namedDates(n),r=i(a.amount*e,new Date,"future");return this.between(t,[new Date,r],!0)}},{key:"is",value:function(t){this._hasTrail();var e=this._data.filter((function(e){return e[t]}));return this._chain(e)}},{key:"has",value:function(t){this._hasTrail();var e=this._data.filter((function(e){return e.hasOwnProperty(t)}));return this._chain(e)}},{key:"hasDeep",value:function(t){var e=this;this._hasTrail();var n=[];return function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._data,i=arguments.length>2?arguments[2]:void 0;r.forEach((function(r){var u=i||r,h=e._deep(a,r);r.hasOwnProperty(a)&&n.push(u),h.length&&t(a,h.map((function(t){return r[t]})),u)}))}(t),this._chain(n)}},{key:"find",value:function(t,e){this._hasTrail();var n=this._find(t,e);return this._chain(n)}},{key:"findDeep",value:function(t,e){var n=this;this._hasTrail();var a=[];return function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n._data,u=arguments.length>3?arguments[3]:void 0;i.forEach((function(i){var h=u||i,o=n._deep(e,i);h===i&&n._find(e,r,[i]).length>0&&!a.includes(h)&&a.push(h),(0===o.length||Object.keys(i).includes(e))&&n._find(e,r,[i]).length>0&&!a.includes(h)&&a.push(h),o.length&&t(e,r,o.map((function(t){return i[t]})),h)}))}(t,e),this._chain(a)}},{key:"_hasTrail",value:function(){if(this._trail.exe.length)return this._data=[].concat.apply([],this._exeTrail()),this._chain(this._data)}},{key:"_addTrail",value:function(t,e){for(var n=["orWhere"],a=["andWhere"],r=arguments.length,i=new Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];t&&this._trail.exe.push({type:a.includes(e)?"and":n.includes(e)&&"or",name:"_"+e,args:i,exe:this["_"+e].bind(this)})}},{key:"_resetTrail",value:function(){this._trail={exe:[],data:[],prev:[]}}},{key:"_exeTrail",value:function(){var t=this,e=[],n=[],a=this._trail.exe.map((function(a){return"or"===a.type&&(n=t._trail.data),"and"===a.type&&(n=t._trail.prev),e.push(a.type),a.exe.apply(a,f(a.args).concat([n]))}));return e.includes("and")||a.push(this._trail.prev),this._resetTrail(),a}},{key:"where",value:function(t,e,n){this._hasTrail(),this._trail.data=this._data;var a=this._operator(t,e,n);return this._trail.prev=a,this._chain(a)}},{key:"orWhere",value:function(t,e,n){return this._addTrail(!0,"orWhere",t,e,n),this._chain(this._data)}},{key:"_orWhere",value:function(t,e,n,a){return this._operator(t,e,n,!1,a)}},{key:"andWhere",value:function(t,e,n){return this._addTrail(!0,"andWhere",t,e,n),this._chain(this._data)}},{key:"_andWhere",value:function(t,e,n,a){return this._operator(t,e,n,!1,a)}},{key:"create",value:function(t){this._data.push(t),this._chain(this._data)}},{key:"read",value:function(t){return this._hasTrail(),this._data[t]}},{key:"update",value:function(t,e){this._hasTrail(),this._data[t]=e,this._chain(this._data)}},{key:"updateValue",value:function(t,e,n){this._hasTrail(),this._data[t][e]=n,this._chain(this._data)}},{key:"updateAll",value:function(t,e){this._hasTrail(),this._data.forEach((function(n){return n[t]=e})),this._chain(this._data)}},{key:"delete",value:function(t){this._hasTrail(),delete this._data[t],this._chain(this._data)}},{key:"deleteValue",value:function(t,e){this._hasTrail(),delete this._data[t][e],this._chain(this._data)}},{key:"deleteAll",value:function(){this._hasTrail(),this._data=[],this._chain(this._data)}},{key:"save",value:function(t){return t=t||(65536*(1+Math.random())|0).toString(16).substring(1),m.forEach((function(t){return t.id++})),m.push({name:t,id:1,data:this._data,time:Math.floor(Date.now()/1e3)}),m.reverse(),t}},{key:"retrieve",value:function(t){return this._find("name",t,m)}},{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"info",get:function(){return this._info},set:function(t){this._info.length=t}},{key:"config",set:function(t){this._settings=t},get:function(){return this._settings}},{key:"store",get:function(){return m}}])&&p(e.prototype,n),a&&p(e,a),t}();e.default=k}]).default;